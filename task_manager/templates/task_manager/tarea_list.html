{% extends "task_manager/base.html" %}
{% block title %}Tareas{% endblock %}

{% block content %}
<div class="row g-2 align-items-center mb-3">
  <div class="col">
    <h4 class="m-0">Tareas</h4>
  </div>
  <div class="col-auto">
    <a href="{% url 'tarea_buscar' %}" class="btn btn-outline-secondary">Buscar</a>
    <a href="{% url 'tarea_create' %}" class="btn btn-primary">Nueva</a>
  </div>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table align-middle">
        <thead>
          <tr>
            <th>Título</th>
            <th class="text-nowrap">Estado</th>
            <th>Proyecto</th>
            <th class="text-nowrap">Fecha límite</th>
            <th>Etiquetas</th>
          </tr>
        </thead>
        <tbody>
          {% for t in tareas %}
            <tr>
              <td class="fw-medium">{{ t.titulo }}</td>
              <td>
                {% if t.estado == 'done' %}
                  <span class="badge text-bg-success">Hecha</span>
                {% elif t.estado == 'doing' %}
                  <span class="badge text-bg-warning">En progreso</span>
                {% else %}
                  <span class="badge text-bg-secondary">Por hacer</span>
                {% endif %}
              </td>
              <td class="text-body-secondary">{{ t.proyecto|default:"—" }}</td>
              <td class="text-body-secondary">{{ t.fecha_limite|date:"Y-m-d"|default:"—" }}</td>
              <td>
                {% for tag in t.etiquetas.all %}
                  <span class="badge text-bg-light border me-1 mb-1">{{ tag.nombre }}</span>
                {% empty %}
                  <span class="text-body-secondary">—</span>
                {% endfor %}
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5" class="text-center text-body-secondary py-4">No hay tareas.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
